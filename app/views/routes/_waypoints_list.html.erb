<% if !@routes.nil? && false %>
	<!-- waypoints List -->
	<div class="view-wizard-container">
		<h5 class="waypoints-title">journeys</h5>
		<div id="waypt-accord" class="panel-group markers-container wizard-step" role="tablist" aria-multiselectable="true">
			<% @routes.each_with_index do |route, index| %>
	  		<div class="panel panel-default">
	  			<div id="heading-<%= route.id %>" class="panel-heading" >
	  				<h4 class="panel-title">
	  					<a role="button" data-toggle="collapse" data-parent="#waypt-accord" href="#collapse-<%= route.id %>" aria-expanded="true" aria-controls="collapse-<%= index %>" data-route="<%= route.id %>" class="route-switcher" >
          			<%= route.title %>
        			</a>
	  				</h4>
	  			</div>

	  			<div id="collapse-<%= route.id %>" class="panel-collapse collapse <%= 'in' if index == 0 %>" role="tabpanel" aria-labelledby="heading-<%= route.id %>">
	  				<div class="panel-body">
	  					<% if route.blips.present? %>
	  						<ul class="waypoints-container">
	  							<% route.blips.order(:date).each_with_index do |blip, index| %>
	  								<li class="blip" data-blip="<%= blip.id %>" data-initx="<%= blip.x %>" data-inity="<%= blip.y %>" data-blipslide="<%= index %>" data-routeid="<%= route.id %>">
	  									<p class="blip-title <%= 'li-blip-selected' if index == 0 %>"><%= blip.title %></p>
	  								</li>
			  					<% end %>							
	  						</ul>
	  					<% end %>							
						</div>
					</div>
				</div>
			<% end %>	  		

		  <% if user_is_home(@user) %>
		  	<p class="edit-delete-map">
		  		<%= link_to 'new journey', new_route_path %>
		  		<!-- <span style="
		  		color:#23527c; font-size:14px;"> | </span>  -->
		  		<%#= link_to 'new blip', new_blip_path %>
		  	</p>
		  <% end %>
	</div>

	<script type="text/javascript">
		/* Toggle a Route */
		$('.route-switcher').on('click', function(){
			var route_id = $(this).data('route');
			var r = getTimeline(route_id);
			$('.route-content').addClass('hidden');
			$('#dm-timeline-' + route_id).removeClass('hidden').parent().removeClass('hidden');

			var title = r.title.replace(/&quot;/g, '');
			var description = r.description.replace(/&quot;/g, '');

			$('.route-header').text(title);
			$('.route-description').text(description);


			r.goToStart(); // reset selected timeline until I can figure out how to keep track of current slide
		});*/

		/* when user clicks waypoint <li>, update map and timeline */
		$('.blip').on('click', function(){
		  var id = $(this).data('blip')
		  var wp = DriftMapLeaflet.getWayPoint(id);

		  if(wp){
		  	// open waypoint on map
		  	DriftMapLeaflet.setWayPoint(id);

		  	// highlight waypoint text in bootstrap accordian
		  	$('.li-blip-selected').removeClass('li-blip-selected');
		    $('li.blip[data-blip="'+ id +'"] p').addClass('li-blip-selected');
		  }
		});
	</script>
<% end %>