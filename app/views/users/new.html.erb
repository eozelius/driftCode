<% provide(:title, 'sign up') %>


<div class="flash-container hidden"></div>

<h3 class="page-title">welcome to driftMap</h3>

<div class="signup-container">
	<%= form_for(@user) do |f| %>
		<!-- STEP 1 -->
	  <div class="step-1-slide signup-text">
	    <% if @user.errors.any? %>
	      <div class="errors">
	        <p class="title">whoops</p>
	        <ul class="errors-list">
	          <% @user.errors.full_messages.each do |msg| %>
	            <li><p><%= msg %></p></li>
	          <% end %>
	        </ul>
	      </div>  
	    <% end %>
	    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
	      <p>
	      	<%= f.label :name %>
	      	<%= f.text_field :name %>
	      </p>  

	      <p>
	      	<%= f.label :email %>
	      	<%= f.text_field :email %>
	      </p>

	      <p>
	        <%= f.label :password %>
	      	<%= f.password_field :password %>
	      </p>

	      <p>
	        <%= f.label :password_confirmation %>
	      	<%= f.password_field :password_confirmation %>
	      </p>

	      <p style="margin: 50px 0; color: #C2D9EB">
	      	already have an account? | <%= link_to 'log in', login_path %>
	      </p>
	    </div><!-- end left-hand text -->

	    <div class="col-lg-5 col-md-5">
	      <p>
	        <%= f.label :from, 'Where are you from?' %>
	        <%= f.text_field :from %>
	      </p>

	      <p>
	        <%= f.label :gps, 'Where are you currently?' %>
	        <%= f.text_field :gps %>
	      </p>

	      <p>
	        <%= f.label 'profile picture' %>
	        <%= f.file_field :profile_pic, accept: 'image/jpeg, image/gif, image/png, image/jpg' %>
	      </p>
	      
	    </div>
	    <p class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
	      <span class="normal signup" type="submit">next</button>
	    </p>

	    <script type="text/javascript">
	    	// Cannot upload images larger than 3M
    	  $('.signup').on('click', function(){
    	    $('#new_user input[type="text"]').each(function(){
    	      $(this).val(xss_trim($(this).val()));
    	    });

    	    $('#new_user').submit();
    	  });

	    	$('#user_profile_pic').on('change', function() {
	    	  var size_in_megabytes = this.files[0].size/1024/1024;
	    	  if (size_in_megabytes > 3){
	    	    alert('Maximum file size is 3MB. Please choose a smaller file.');
	    	    return false;
	    	  }
	    	});
	    </script>
	  </div>
	<% end %>
</div>