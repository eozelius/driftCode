<% provide(:title, @user.name) %>

<h3 class="page-title"><%= @user.name %></h3>
<div class="map-container">
	<div id="profile-map"></div>

	<script>
		var map = L.map('profile-map').setView([40.73527, -73.89], 12);

		// TODO make this API key a Server environment variable
		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
	    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	    maxZoom: 18,
	    id: 'eozelius77.j4hekake',
	    accessToken: 'pk.eyJ1IjoiZW96ZWxpdXM3NyIsImEiOiJkQmhDSl8wIn0.MzOmrtAL3uTNmVfLmEZ57g'
		}).addTo(map);
	</script>
</div><!-- End Map -->

<div id="pro-parts-container">
	<div class="pro-part profile-photos col-lg-7 col-md-7 col-sm-12 col-12">
		<h4 class="page-title" style="border:none;">blibs</h4>
		<% if @user.posts.count > 1 %>
			<%= render 'posts/posts' %>
		<% else%>
			<p style="text-align:center"><%= @user.name %> hasn't been anywhere yet.</p>
		<% end %>
	</div><!-- end where I've been -->

	<div class="pro-part profile">
		<% if user_is_home(@user) %>
			<h4 class="page-title" style="border:none;">new blib</h4>
			<div class="new-blib-container">
				<%= render 'posts/form' %>
			</div>
		<% end %><!-- end create blib -->

		<h4 class="page-title" style="border:none;"><%= @user.name %></h4>
		<div class="profile-details-container">
			<div class="profile-details">
				<p><%= @user.name %></p>
				<p>from: United States<%#= @user.from %></p>
				<p>gps: Medellin, Colombia<%#= @user.gps %></p>

				<% if user_is_home(@user) || admin_user %>
					<p><%= @user.email %></p>
					<a class="edit-anchor">edit</a><a> | </a><%= link_to 'delete', @user, method: :delete, data: { confirm: "Are you sure?" } %>
				<% end %>
			</div>
		</div><!-- end profile info -->

	</div>
</div>	
