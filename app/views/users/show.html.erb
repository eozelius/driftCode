<% provide(:title, @user.name) %>

<h3 class="page-title"><%= @user.name %></h3>

<div id="profile-map"></div>

	<script>
		var map = L.map('profile-map').setView([40.73527, -73.89], 12);

		// TODO make this API key a Server environment variable
		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
	    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	    maxZoom: 18,
	    id: 'eozelius77.j4hekake',
	    accessToken: 'pk.eyJ1IjoiZW96ZWxpdXM3NyIsImEiOiJkQmhDSl8wIn0.MzOmrtAL3uTNmVfLmEZ57g'
	}).addTo(map);
</script>

<div id="pro-parts-container">
	<div class="pro-part profile-photos col-lg-7 col-md-7 col-sm-12 col-12">
		<% begin %>
			<!-- Create new post form -->
			<% if @user.id == current_user.id %>
				<h4>Create a new Post</h4>
				<div id="create-post-container">
					<div class="create-form-container">
						<label>New post</label>
						<input type="text">
						<input type="submit">
					</div>
				</div>
			<% end %>

		<% rescue %>
			<h4>No user logged in</h4>
		<% end %>

		<% if @user.posts.any? %>
			<h4>Posts</h4>
			<% @user.posts.each do |post| %>
				<div class="post-container">
					<li><p><%= post.title %></p></li>
					<li><p><%= post.body %></p></li>
					<li><p><%= post.user_id %></p></li>
				</div>	
			<% end %>
		<% else %>
			<h5><%= @user.name %> doesn't have any posts yet.</h5>
		<% end %>
	</div>

	<div class="pro-part profile-blog-titles col-lg-4 col-md-4 col-sm-12 col-xs-12 col-ls-offset-1 col-md-offset-1">
		<h4>Stories</h4>
	</div>
</div>	
